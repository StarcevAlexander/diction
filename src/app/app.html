<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">

      <!-- –ö–Ω–æ–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA -->
      @if (showInstallPrompt && !isPWAInstalled) {
        <div class="alert alert-info text-center mb-4">
          <p class="mb-2">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—ã—Ç–∞!</p>
          <button class="btn btn-success btn-sm" (click)="installPWA()">
            üì≤ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
          </button>
        </div>
      }

      <div class="text-center mb-5">
        <h1 class="display-4 mb-3">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–∏–∫—Ü–∏–∏</h1>
      </div>

      <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <button class="btn btn-outline-primary"
                (click)="previousExercise()">
          ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–µ–µ
        </button>

        <div class="text-center flex-grow-1 mx-3">
          <small class="text-muted">
            –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ <br>
            {{ currentExerciseIndex + 1 }} –∏–∑ {{ exercises.length }}
          </small>
        </div>

        <button class="btn btn-outline-primary"
                (click)="nextExercise()">
          –°–ª–µ–¥—É—é—â–µ–µ ‚Üí
        </button>
      </div>

      <!-- –û–±—â–∏–π —Ç–∞–π–º–µ—Ä -->
      <div class="text-center mb-4">
        <div class="timer-display-large"
             [class.timer-running]="currentExercise.status === 'running'"
             [class.timer-paused]="currentExercise.status === 'paused'">
          {{ timeLeft() }}
        </div>
      </div>

      <!-- –¢–µ–∫—É—â–µ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ -->
      @if (currentExercise) {
        <div class="card exercise-card">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h2 class="card-title mb-0">{{ currentExercise.title }}</h2>
              <span class="exercise-status" [class]="'status-' + currentExercise.status">
                {{ getStatusText(currentExercise.status) }}
              </span>
            </div>

            <div class="exercise-description mb-4">
              <p class="card-text fs-5">{{ currentExercise.description }}</p>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="d-flex justify-content-center gap-3 flex-wrap">
              <button class="btn btn-lg btn-action"
                      [class.btn-success]="currentExercise.status === 'paused'"
                      [class.btn-warning]="currentExercise.status === 'running'"
                      (click)="toggleExercise()"
                      [disabled]="currentExercise.completed">
                {{ currentExercise.status === 'paused' ? '–ü—Ä–∏—Å—Ç—É–ø–∏—Ç—å' : '–ü–∞—É–∑–∞' }}
              </button>

              @if (currentExercise.status !== 'paused') {
                <button class="btn btn-primary btn-lg btn-action"
                        (click)="restartExercise()"
                        [disabled]="currentExercise.completed">
                  –ü–æ–≤—Ç–æ—Ä–∏—Ç—å
                </button>
              }
            </div>
          </div>
        </div>
      }
    </div>
  </div>
</div>
